function HeaderMobileNavManager(){this.burger=document.querySelector(".burger"),this.navList=document.querySelector(".nav-list");var a=function(){this.burger.classList.toggle("burger__bar--change"),this.navList.classList.toggle("nav-list-mobile--active")}.bind(this);this.burger.addEventListener("click",a)}function BookFormContainer(){this.isActive=!1,this.container=document.querySelector(".book-form-container"),this.openBtn=document.querySelector(".book-btn"),this.openBtnHeader=document.querySelector(".open-book-form-btn"),this.closeBtn=document.querySelector(".book-form-container__close"),this.decorizedBtn=document.querySelector(".decorized-button"),this.toggle=function(){this.isActive=!this.isActive,this.toggleContainer()}.bind(this),this.toggleContainer=function(){this.container.classList.toggle("book-form-container--active")},this.init=function(){this.openBtn.addEventListener("click",this.toggle),this.openBtnHeader.addEventListener("click",this.toggle),this.closeBtn.addEventListener("click",this.toggle),this.decorizedBtn.addEventListener("click",this.toggle),document.addEventListener("keydown",function(a){this.isActive&&"Escape"===a.key&&this.toggle()}.bind(this))},this.init()}function BookingForm(){this.form=document.querySelector("#bookingForm"),this.send=function(a){a.preventDefault();var b=new FormData(this.form),c={date:b.get("dateInput"),time:b.get("timeInput"),name:b.get("nameInput"),phone:b.get("phoneInput")};window.ajax.request({url:BOOK_FORM_ENDPOINT,method:"POST",requestData:c,onLoad:function(){var a=JSON.parse(this.response),b=a.isFormValid,c=a.errorMessage;if(b)alert("\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),bookFormContainer.toggle();else{var d="";if(null!==c)alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0438. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.");else{for(var e in a.errors){var f=a.errors[e].required;d+=f+"\n"}alert(d)}}},onError:function(a){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0438. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),console.error(a)}})}.bind(this),this.init=function(){a(),this.form.addEventListener("submit",this.send)};var a=function(){var a=this.form.querySelector("#dateInput");window.today=(new Date).toISOString().substr(0,10),a.value=window.today,a.min=window.today}.bind(this);this.init()}!function(){function a(){function b(a,b){if(null===b)return a;if(a.indexOf("?")>-1)return a;var c=g(b);return a+=c}function c(a,b){"POST"===b&&d(a)}function d(a){e(a)||f(a)}function e(a){var b=!1;try{JSON.parse(requestData),b=!0}catch(c){return b}return a.setRequestHeader("Content-Type","application/json"),b}function g(a){var b="?";for(var c in a)b+=c+"="+a[c]+"&";return b}this.requestData=null,this.request=function(b){void 0===b.requestData&&(b.requestData=null);var c=new XMLHttpRequest;c.addEventListener("load",b.onLoad),c.addEventListener("error",b.onError),this.requestData=b.requestData,a(c,b.method,b.url)};var a=function(a,d,e){"GET"===d&&(e=b(e,this.requestData)),a.open(d,e),c(a,d),a.send(this.requestData)}.bind(this),f=function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var b="";for(var c in this.requestData)b+=c+"="+this.requestData[c]+"&";this.requestData=b}.bind(this)}window.ajax=new a}();var headerMobileNavManager=new HeaderMobileNavManager,bookFormContainer=new BookFormContainer,bookingForm=new BookingForm;
